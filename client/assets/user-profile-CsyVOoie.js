import{a as d,j as e}from"./index-Cg5R3hIZ.js";import{g as o,l as x}from"./auth-context-BQBhOI20.js";function h(){const[t,s]=d.useState(null);return d.useEffect(()=>{const a=()=>{const n=o();if(!n){s(null);return}const l=10800*1e3,m=Date.now()-n.timestamp,c=l-m;c<=0?s(null):s(c)};a();const r=setInterval(a,60*1e3);return()=>clearInterval(r)},[]),{timeRemaining:t,timeRemainingMs:t,timeRemainingFormatted:(()=>{if(!t)return null;const a=Math.floor(t/(3600*1e3)),r=Math.floor(t%(3600*1e3)/(60*1e3)),n=Math.floor(t%(60*1e3)/1e3);return`${a}:${r.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`})()}}function j(){const{timeRemainingFormatted:t,timeRemainingMs:s}=h();if(!s)return null;const i=s<1800*1e3;return e.jsxs("div",{className:`rounded-full px-3 py-1 text-sm ${i?"border border-yellow-300 bg-yellow-100 text-yellow-800":"border border-blue-300 bg-blue-100 text-blue-800"}`,children:["セッション残り時間: ",t,i&&e.jsx("span",{className:"ml-2 font-semibold text-xs",children:"⚠️ まもなく期限切れ"})]})}function f({user:t,userProfile:s}){const[i,a]=d.useState(!1),r=async()=>{try{a(!0),await x()}catch(l){console.error("Logout error:",l)}finally{a(!1)}},n=l=>l?.toDate?l.toDate().toLocaleString("ja-JP"):"不明";return e.jsxs("div",{className:"rounded-lg bg-white p-6 shadow-md",children:[e.jsx("div",{className:"mb-4",children:e.jsx(j,{})}),e.jsxs("div",{className:"mb-6 flex items-center space-x-4",children:[t.photoURL&&e.jsx("img",{src:t.photoURL,alt:t.displayName||"ユーザー",className:"h-16 w-16 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-xl",children:t.displayName||"ユーザー"}),e.jsx("p",{className:"text-gray-600 text-sm",children:t.email})]})]}),s&&e.jsxs("div",{className:"mb-6 space-y-3",children:[e.jsx("h4",{className:"border-b pb-1 font-medium text-gray-700 text-sm",children:"アカウント情報"}),e.jsxs("div",{className:"space-y-2 text-gray-600 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Gmail:"}),e.jsx("span",{children:s.gmail})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"名前:"}),e.jsx("span",{children:s.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"年度:"}),e.jsx("span",{children:s.year})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"管理者:"}),e.jsx("span",{className:s.isAdmin?"font-medium text-green-600":"text-gray-500",children:s.isAdmin?"✓":"✗"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"試験官:"}),e.jsx("span",{className:s.isExaminer?"font-medium text-green-600":"text-gray-500",children:s.isExaminer?"✓":"✗"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"卒業済み:"}),e.jsx("span",{className:s.isGraduated?"font-medium text-green-600":"text-gray-500",children:s.isGraduated?"✓":"✗"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"作成日:"}),e.jsx("span",{children:n(s.createdAt)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"最終ログイン:"}),e.jsx("span",{children:n(s.lastLoginAt)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"更新日:"}),e.jsx("span",{children:n(s.updatedAt)})]})]})]}),e.jsx("button",{type:"button",onClick:r,disabled:i,className:"w-full rounded-md bg-red-600 px-4 py-2 font-medium text-sm text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 disabled:cursor-not-allowed disabled:opacity-50",children:i?"ログアウト中...":"ログアウト"})]})}export{f as U};
